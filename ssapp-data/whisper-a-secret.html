<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <title>Whisper A Secret</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@800&amp;family=Roboto:wght@400;500;700&amp;display=block" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="whisper.css">
</head>
<body>

  <!--Navigation Section-->
  <section class="_58ce83d8">
    <div class="wr">
      <div class="_f4c879d8">
        <div class="_9698a7cf" style="--gap:1;font-size:16px">
          <a href="index.html">
            <div class="_f7a17dd3" style="--scale:1"><img src="images/SSminilogo.png" class="_246d637b" alt="SecretSentry logo.png"></div>
            <span class="_3c86000f">SecretSentry</span>
          </a>
        </div>
        <nav id="co868pn5qr" class="_2306d92f um-nav-wrapper um-classic um-hidden">
          <div class="um-nav-children"></div>
          <ul class="um-nav-links">
            <li><a href="">Features</a></li>
            <li><button>About Us</button>
              <div class="um-nav-flyout">
                <ul>
                  <li>
                    <a href="" class="um-nav-item">
                      <div>CTRL Freaks</div>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
            <li>
              <button>Contact</button>
              <div class="um-nav-flyout">
                <ul>
                  <li>
                    <a href="" class="um-nav-item"><div>Don't</div></a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
          <div class="um-nav-buttons">
            <a href="index.html" id="7vnwg0or1z8" class="_ad787885 btn"><span>Return to Homepage</span></a>
          </div>
        </nav>
        <button id="co868pn5qr-drawerTrigger" class="um-nav-drawerTrigger" title="Open Mobile Menu"></button>
        <div id="co868pn5qr-drawer" class="_2306d92f um-nav-drawer um-hidden">
          <header>
            <button class="um-nav-drawerClose"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
          </header>
          <div class="um-drawer-links">
            <li><a href="">Features</a></li>
            <li><button>About Us</button>
              <ul>
                <li>
                  <a href="">CTRL Freaks</a>
                </li>
              </ul>
            </li>
            <li><button>Contact</button>
              <ul>
                <li><a href="">Don't</a></li>
              </ul>
            </li>
          </div>
          <div class="um-drawer-buttons">
            <a href="index.html" id="d_7vnwg0or1z8" class="_ad787885 btn"><span>Return to Homepage</span></a>
          </div>
        </div>

        <!-- Scripts -->
        <script>
          !function() {
            // Initial setup: select key elements
            const nav = document.getElementById('co868pn5qr');
            if (!nav) return; // Early exit if nav not found
            
            const drawerTrigger = document.getElementById('co868pn5qr-drawerTrigger');
            const drawer = document.getElementById('co868pn5qr-drawer');
            
            // Hide the drawer when clicking outside of it
            document.addEventListener('click', function(event) {
              if (!drawer.contains(event.target) && event.target !== drawerTrigger) {
                drawer.classList.add('um-hidden');
              }
            });
          
            // Selectors for drawer components and navigation items
            const drawerCloseButton = drawer.querySelector('.um-nav-drawerClose');
            const drawerLinks = drawer.querySelectorAll('.um-drawer-links > li > button');
            const navChildren = nav.querySelector('.um-nav-children');
            const navLinks = nav.querySelector('.um-nav-links');
            const navButtons = nav.querySelector('.um-nav-buttons');
          
            // Show drawer
            drawerTrigger.addEventListener('click', function() {
              drawer.classList.remove('um-hidden');
            });
          
            // Hide drawer
            drawerCloseButton.addEventListener('click', function() {
              drawer.classList.add('um-hidden');
            });
          
            // Toggle submenus within the drawer
            drawerLinks.forEach(function(button) {
              button.addEventListener('click', function() {
                this.parentNode.classList.toggle('um-open');
              });
            });
          
            let totalWidth = 0;
            let isNavHidden = true;
          
            // Adjust navigation based on total width of items
            function adjustNav() {
              if (isNavHidden === false) {
                totalWidth = (navChildren?.offsetWidth || 0) + (navLinks?.offsetWidth || 0) + (navButtons?.offsetWidth || 0);
              }
              updateVisibility();
            }
          
            // Update visibility of navigation and drawer based on viewport
            function updateVisibility() {
              if (nav.offsetWidth - 10 < totalWidth) {
                isNavHidden = true;
                nav.classList.add('um-hidden');
                drawerTrigger.classList.remove('um-hidden');
              } else {
                isNavHidden = false;
                nav.classList.remove('um-hidden');
                drawerTrigger.classList.add('um-hidden');
                drawer.classList.add('um-hidden');
              }
            }
          
            // Use ResizeObserver to adjust layout on resize
            new ResizeObserver(updateVisibility).observe(document.body);
            if (navChildren) new ResizeObserver(adjustNav).observe(navChildren);
            if (navButtons) new ResizeObserver(adjustNav).observe(navButtons);
            if (navLinks) new ResizeObserver(adjustNav).observe(navLinks);
          
            // Initial adjust and update
            adjustNav();
            updateVisibility();
          }();
          </script>
          
            </div>
          </div>
        </section>
        
        <!---Whisper Secret Form -->
        <section class="_ca60a6b2">
          <div class="wr">
            <div class="_b38230f9">
              <div class="_2a50eafc">
              <form action="/submit" method="post" id="cf-7vpr98xbvr" class="form form--oneCol" data-siteid="152makzv9yziruj2" data-formid="form_dPnGLlmisifAyIvV" data-action="{&quot;action&quot;:&quot;redirect&quot;,&quot;redirectUrl&quot;:&quot;&quot;}">
                <div class="cf-field field--twoCol" data-id="Whisper a Secret" data-label="Whisper a Secret" data-required="true" data-field="textarea"><label>Whisper a Secret<span style="color:darkred"> *</span></label><textarea id="secretTextarea" placeholder="Type Here..."></textarea></div>
                <div id="formCaptcha_7vpr98xbvr" class="formCaptcha">
                  <div class="formRow">
                    <div class="cf-field ignore"><label>Security Question</label>
                      <div id="captchaImage_7vpr98xbvr"></div>
                    </div>
                  </div>
                  <div class="formRow">
                    <div class="cf-field ignore" data-required="true">
                      <label>Enter the numbers from the image above</label>
                      <input id="captchaSolution_7vpr98xbvr" type="text" placeholder="123456" class="captchaAnswer">
                    </div>
                  </div>
                </div>
                <div class="formError">
                  <div class="content"><span>Error</span>
                    <div id="errorMessage"></div>
                  </div>
                </div>
                <div class="ctaWrapper"><button id="generateLinkButton" class="btn primary">Submit</button></div>
                <div id="randomLinkContainer" class="randomLinkContainer"></div>
              </form>
            </section>

  <!-- Steps Section -->
  <section class ="_04790b10">
  <div class="wr">

      <!-- Introduction Header -->
      <header class="_7a5b0062">
          <h2 class="_400227c2">Hey There Secret Sharer! This It How It Works...</h2>
          <p class="_18785ede">Here is a step by step on how to get started...</p>
      </header>
      
      <!-- Step 1 -->
      <div class="_14fd25df">
          <div class="_05285107">
              <h3 class="_89b645b9">First Step</h3>
              <div class="_8839c042">Confidently type in your secret.</div>
          </div>
          <div class="_3dd202ec">
              <img src="images/whisper-writesecret.svg" class="_78c11d17" alt="whisper sent">
          </div>
      </div>
      
      <!-- Step 2 -->
      <div class="_14fd25df">
          <div class="_05285107">
              <h3 class="_89b645b9">Second Step</h3>
              <div class="_8839c042">Enter in how many days you would like the secret to be accessed for.</div>
          </div>
          <div class="_3dd202ec">
              <img src="images/whisper-addduration.svg" class="_78c11d17" alt="add duration">
          </div>
      </div>
      
      <!-- Final Step -->
      <div class="_14fd25df">
          <div class="_05285107">
              <h3 class="_89b645b9">Final Step</h3>
              <div class="_8839c042">Once you submit your secret, it will be encrypted. You will receive a link to share with the recipient.</div>
          </div>
          <div class="_3dd202ec">
              <img src="images/directtosecret.svg" class="_78c11d17" alt="direct to secret">
          </div>
      </div>
  </div>
</section>

<!-- Footer -->
<footer class="_c4b89fde">
  <div class="wr">
    <div class="_bea1daea">
      <div class="_240f2910">
        <span class="_c0e4633f">© 2024 CTRL Freaks</span>
        <div class="_a6d0f97b" style="--scale:3"><img src="images/CTRLFreaksLogo.png" class="_9fc8f72f" alt="1709863613224-fotor-bg-remover-20240508175754.png"></div>
         <div class="_a6d0f97b" style="--scale:0.5"></div>
         <div class="_379aefea">
          <a href="https://www.facebook.com/" class="_77e6fd5c"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="24" height="24" class="um-icon _2cd4f8c5"><path d="M448 56.7v398.5a24.7 24.7 0 0 1-24.7 24.7H309.1V306.5h58.2l8.7-67.6h-67v-43.2c0-19.6 5.4-32.9 33.5-32.9h35.8v-60.5c-6.2-.8-27.4-2.7-52.2-2.7-51.6 0-87 31.5-87 89.4v49.9h-58.4v67.6h58.4V480H24.7A24.8 24.8 0 0 1 0 455.3V56.7A24.8 24.8 0 0 1 24.7 32h398.5A24.8 24.8 0 0 1 448 56.7z" fill="currentColor"></path></svg></a><a href="https://www.instagram.com/" class="_77e6fd5c"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="24" height="24" class="um-icon _2cd4f8c5"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6a74.8 74.8 0 1 1 .1-149.3 74.8 74.8 0 0 1-.1 149.3zm146.4-194.3a26.7 26.7 0 1 1-53.6 0 26.8 26.8 0 0 1 53.6 0zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388a75.6 75.6 0 0 1-42.6 42.6c-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9A75.6 75.6 0 0 1 49.4 388c-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1A75.6 75.6 0 0 1 92 81.2c29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9a75.6 75.6 0 0 1 42.6 42.6c11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z" fill="currentColor"></path></svg></a><a href="https://twitter.com/" class="_77e6fd5c"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="24" height="24" class="um-icon _2cd4f8c5"><path d="M459.4 151.7c.3 4.6.3 9.1.3 13.7 0 138.7-105.6 298.5-298.6 298.5A296.5 296.5 0 0 1 0 417a217 217 0 0 0 25.3 1.2c49 0 94.3-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8a111 111 0 0 0 47.4-2 105 105 0 0 1-84.1-103v-1.2c14 7.8 30.2 12.6 47.4 13.3A104.9 104.9 0 0 1 35.7 67.2a298.3 298.3 0 0 0 216.4 109.9 104.9 104.9 0 0 1 179-95.8 206.6 206.6 0 0 0 66.6-25.4 104.7 104.7 0 0 1-46.1 57.8c21-2.3 41.6-8.1 60.4-16.2a225.6 225.6 0 0 1-52.6 54.2z" fill="currentColor"></path></svg></a>
          <a href="https://www.youtube.com/" class="_77e6fd5c"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="24" height="24" class="um-icon _2cd4f8c5"><path d="M549.7 124a68.6 68.6 0 0 0-48.3-48.5C458.8 64 288 64 288 64S117.2 64 74.6 75.5c-23.5 6.3-42 25-48.3 48.6C15 167 15 256.4 15 256.4s0 89.4 11.4 132.3a67.6 67.6 0 0 0 48.3 47.8C117.2 448 288 448 288 448s170.8 0 213.4-11.5a67.6 67.6 0 0 0 48.3-47.8C561 345.8 561 256.4 561 256.4s0-89.5-11.4-132.3zM232 337.7V175.2l143 81.2-143 81.2z" fill="currentColor"></path></svg></a>
        </div>
        <div class="_370825cf umsoPluginTarget">  
        </div>
      </div>
      <ul class="_d1a0a8ea">
        <li class="_0fc50e27">
          <h4 class="_31f6b92b">Features</h4>
          <ul class="_91687afc">
            <li class="_e0485177"><a href="" class="_c288f4a7">Something Great</a></li>
            <li class="_e0485177"><a href="" class="_c288f4a7">Another Thing</a></li>
            <li class="_e0485177"><a href="" class="_c288f4a7">So many Features</a></li>
            <li class="_e0485177"><a href="" class="_c288f4a7">It's Amazing</a></li>
          </ul>
        </li>
        <li class="_0fc50e27">
          <h4 class="_31f6b92b">Company</h4>
          <ul class="_91687afc">
            <li class="_e0485177"><a href="" class="_c288f4a7">Blog</a></li>
            <li class="_e0485177"><a href="" class="_c288f4a7">About Us</a></li>
            <li class="_e0485177"><a href="" class="_c288f4a7">Contact</a></li>
            <li class="_e0485177"><a href="" class="_c288f4a7">Jobs</a></li>
          </ul>
        </li>
        <li class="_0fc50e27">
          <h4 class="_31f6b92b">Legal</h4>
          <ul class="_91687afc">
            <li class="_e0485177"><a href="/privacy-policy" class="_c288f4a7">Privacy Policy</a></li>
            <li class="_e0485177"><a href="/terms-of-use" class="_c288f4a7">Terms of USe</a></li>
            <li class="_e0485177"><a href="/cookie-policy" class="_c288f4a7">Cookie Policy</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</footer>
<script>
  // Immediately Invoked Function Expression (IIFE) to encapsulate the code
  (function() {
    const form = document.getElementById('cf-7vpr98xbvr');
    const submitButton = document.getElementById('cf-cta-7vpr98xbvr');
    const randomLinkContainer = document.getElementById('randomLinkContainer');
    const secretTextarea = document.getElementById('secretTextarea');

    function generateUUID() {
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
      });
    }

    async function generateLink(secret) {
      const url = "https://gfpib3qzmg.execute-api.us-east-1.amazonaws.com/dev/secrets"; // Adjusted for specific API path
      const key = generateUUID();
      const data = JSON.stringify({
        "operation": "store",  // Added operation as expected by Lambda
        "data": {              // Structured the payload as expected by the Lambda function
          "key": key,
          "secret": secret
        }
      });

      try {
        const response = await fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: data
        });

        if (!response.ok) {
          throw new Error(`Network response was not ok: ${response.statusText} (status: ${response.status})`);
        }

        const responseData = await response.json();
        const preSignedUrl = responseData.url;
        if (randomLinkContainer) {
          randomLinkContainer.innerHTML = 'Share This Link: <a href="' + preSignedUrl + '">' + preSignedUrl + '</a>';
        } else {
          throw new Error('Link container not found.');
        }
      } catch (error) {
        console.error('There was a problem with the fetch operation:', error);
        alert('Failed to generate the link. Please check the console for more information.');
      }
    }

    function handleSubmit(event) {
      event.preventDefault();
      if (secretTextarea) {
        const secret = secretTextarea.value;
        generateLink(secret);
      } else {
        console.error('Textarea for secret not found');
        alert('Textarea for secret input is not found.');
      }
    }

    if (form) {
      form.addEventListener('submit', handleSubmit);
    } else {
      console.error('Form not found');
    }

    if (submitButton) {
      submitButton.addEventListener('click', handleSubmit);
    }

  })();
</script>
</body>
</html>